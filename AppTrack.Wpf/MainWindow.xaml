<Window
    x:Class="AppTrack.Wpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:AppTrack.Wpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:AppTrack.Frontend.Models;assembly=AppTrack.Frontend.Models"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    xmlns:viewmodel="clr-namespace:AppTrack.WpfUi.ViewModel"
    Title="AppTrack"
    Width="1500"
    Height="800"
    ui:WindowHelper.UseModernWindowStyle="True"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <DockPanel Margin="10">
        <!--  Menu  -->
        <DockPanel DockPanel.Dock="Top">
            <Menu DockPanel.Dock="Top">
                <MenuItem FontSize="18" Header="File">
                    <MenuItem Command="{Binding ExitCommand}" Header="E_xit" />
                </MenuItem>
                <MenuItem FontSize="18" Header="Settings">
                    <MenuItem FontSize="18" Header="Defaults">
                        <MenuItem Command="{Binding SetDefaultsCommand}" Header="Set Defaults" />
                    </MenuItem>
                    <MenuItem FontSize="18" Header="AI">
                        <MenuItem Command="{Binding AiSettingsCommand}" Header="AI Settings" />
                    </MenuItem>
                </MenuItem>
            </Menu>
        </DockPanel>
        <!--  MainContent  -->
        <Button
            Margin="10,20,10,20"
            HorizontalAlignment="Left"
            Command="{Binding CreateJobApplicationCommand}"
            Content="Create Job Application"
            DockPanel.Dock="Top" />
        <!--  DataGrid  -->
        <DataGrid
            MaxWidth="{Binding ActualWidth, RelativeSource={RelativeSource AncestorType=Window}}"
            d:DataContext="{d:DesignInstance Type=models:JobApplicationModel,
                                             IsDesignTimeCreatable=True}"
            AlternatingRowBackground="LightGray"
            AutoGenerateColumns="False"
            ColumnWidth="*"
            Focusable="False"
            IsReadOnly="True"
            ItemsSource="{Binding JobApplications}"
            RowHeight="40">
            <DataGrid.Columns>
                <!--  Id  -->
                <DataGridTextColumn
                    Width="0.4*"
                    Binding="{Binding Id}"
                    Header="Id">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding Id}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  Name  -->
                <DataGridTextColumn Binding="{Binding Name}" Header="Name">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding Name}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  Position  -->
                <DataGridTextColumn
                    Width="1*"
                    Binding="{Binding Position}"
                    Header="Position">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding Position}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  URL  -->
                <DataGridTextColumn
                    Width="1.5*"
                    Binding="{Binding URL}"
                    Header="URL">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding URL}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  Status  -->
                <DataGridTextColumn
                    Width="1*"
                    Binding="{Binding Status}"
                    Header="Status">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding Status}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  ApplicationText  -->
                <DataGridTextColumn
                    Width="3.5*"
                    Binding="{Binding ApplicationText}"
                    Header="Application Text">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding ApplicationText}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  CreationDate  -->
                <DataGridTextColumn
                    Width="1.7*"
                    Binding="{Binding CreationDate}"
                    Header="Created">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding CreationDate}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  ModifiedDate  -->
                <DataGridTextColumn
                    Width="1.7*"
                    Binding="{Binding ModifiedDate}"
                    Header="Modified">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="ToolTip" Value="{Binding ModifiedDate}" />
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <!--  Functions  -->
                <DataGridTemplateColumn
                    Width="2.5*"
                    CanUserResize="False"
                    Header="Functions">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
                                <Button
                                    Margin="5"
                                    Command="{Binding DataContext.EditJobApplicationCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"
                                    Content="Edit" />
                                <Button
                                    Margin="5"
                                    Command="{Binding DataContext.GenerateApplicationTextCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"
                                    Content="Generate Text" />
                                <Button
                                    Margin="5"
                                    Command="{Binding DataContext.DeleteJobApplicationCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding Id}"
                                    Content="Delete" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
